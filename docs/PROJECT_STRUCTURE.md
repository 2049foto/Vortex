# VORTEX PROTOCOL - Cáº¤U TRÃšC THÆ¯ Má»¤C TOÃ€N DIá»†N

**Cáº­p nháº­t**: January 2, 2026  
**PhiÃªn báº£n**: 1.0.0

---

## ğŸ“ Tá»”NG QUAN Cáº¤U TRÃšC

```
Vortex/
â”œâ”€â”€ ğŸ“„ Root Files (Configuration & Documentation)
â”œâ”€â”€ ğŸ“ packages/          # Monorepo packages
â”‚   â”œâ”€â”€ frontend/        # React 19 + Vite frontend
â”‚   â””â”€â”€ backend/         # Bun + Hono backend
â”œâ”€â”€ ğŸ“ docs/             # Documentation
â”œâ”€â”€ ğŸ“ scripts/          # Utility scripts
â””â”€â”€ ğŸ“ .github/          # GitHub templates
```

---

## ğŸ“„ ROOT FILES

### Configuration Files

| File | MÃ´ táº£ |
|------|-------|
| `package.json` | Workspace root configuration, scripts, dependencies |
| `bun.lockb` | Bun lockfile (dependency versions) |
| `vercel.json` | Vercel deployment configuration |
| `.gitignore` | Git ignore patterns |

### Documentation Files

| File | MÃ´ táº£ |
|------|-------|
| `README.md` | Project overview, setup, features |
| `SECURITY.md` | Security policy, vulnerability reporting |
| `CONTRIBUTING.md` | Contribution guidelines |
| `CHANGELOG.md` | Version history |
| `LICENSE` | MIT License |
| `AUDIT_REPORT.md` | Initial audit report |
| `PRODUCTION-AUDIT-REPORT.md` | Final production audit (96/100) |

---

## ğŸ“ packages/frontend/

**Tech Stack**: React 19, Vite 6.0, TypeScript 5.8, TailwindCSS 4.0

### Root Configuration

```
frontend/
â”œâ”€â”€ package.json              # Frontend dependencies & scripts
â”œâ”€â”€ tsconfig.json            # TypeScript config (strict mode)
â”œâ”€â”€ tsconfig.node.json        # TypeScript config for Node tools
â”œâ”€â”€ vite.config.ts           # Vite bundler configuration
â”œâ”€â”€ postcss.config.js         # PostCSS config (TailwindCSS v4)
â”œâ”€â”€ tailwind.config.ts        # TailwindCSS theme & utilities
â”œâ”€â”€ index.html                # HTML entry point
â””â”€â”€ public/
    â””â”€â”€ vortex-icon.svg      # App icon
```

### ğŸ“ src/ - Source Code

#### Entry Points

| File | MÃ´ táº£ |
|------|-------|
| `main.tsx` | React app entry point, router setup |
| `App.tsx` | Main app component, route definitions |
| `vite-env.d.ts` | Vite type definitions |

#### ğŸ“ components/ - React Components

**UI Components** (`components/ui/`)
- `Button.tsx` - Reusable button component
- `Card.tsx` - Card container component
- `Badge.tsx` - Status badge component
- `Input.tsx` - Form input component
- `Select.tsx` - Dropdown select component
- `Modal.tsx` - Modal dialog component
- `Skeleton.tsx` - Loading skeleton component
- `index.ts` - Barrel export

**Layout Components** (`components/layout/`)
- `Layout.tsx` - Main page layout wrapper
- `Header.tsx` - Top navigation header
- `Sidebar.tsx` - Side navigation menu
- `Footer.tsx` - Page footer
- `index.ts` - Barrel export

**Feature Components** (`components/features/`)
- `TokenScanner.tsx` - Token security scanner UI
- `PortfolioCard.tsx` - Portfolio summary card
- `HoldingsTable.tsx` - Token holdings table
- `WatchlistCard.tsx` - Watchlist management card
- `index.ts` - Barrel export

#### ğŸ“ pages/ - Route Pages

| File | Route | MÃ´ táº£ |
|------|-------|-------|
| `Home.tsx` | `/` | Landing page, wallet connect |
| `Dashboard.tsx` | `/dashboard` | Main dashboard (protected) |
| `Portfolio.tsx` | `/portfolio` | Portfolio view (protected) |
| `TokenDetail.tsx` | `/token/:address` | Token analysis page |
| `Watchlist.tsx` | `/watchlist` | Watchlist management (protected) |
| `Settings.tsx` | `/settings` | User settings (protected) |

#### ğŸ“ hooks/ - Custom React Hooks

| File | MÃ´ táº£ |
|------|-------|
| `useAuth.ts` | Authentication state & login/logout |
| `useWallet.ts` | Wallet connection (MetaMask, WalletConnect) |
| `usePortfolio.ts` | Portfolio data fetching |
| `useApi.ts` | API request wrapper with auth |
| `index.ts` | Barrel export |

#### ğŸ“ stores/ - Zustand State Management

| File | MÃ´ táº£ |
|------|-------|
| `auth.ts` | Authentication state (user, token, isAuthenticated) |
| `portfolio.ts` | Portfolio data & cache |
| `alerts.ts` | Alert management state |
| `ui.ts` | UI state (theme, sidebar, modals) |

#### ğŸ“ lib/ - Utilities

| File | MÃ´ táº£ |
|------|-------|
| `api.ts` | API client with auth headers, error handling |
| `format.ts` | Number/currency/address formatting utilities |
| `validators.ts` | Client-side validation (addresses, chains) |

#### ğŸ“ types/ - TypeScript Types

| File | MÃ´ táº£ |
|------|-------|
| `index.ts` | Core types (User, Token, Portfolio, Chain, etc.) |
| `api.ts` | API request/response types |

#### ğŸ“ styles/ - Stylesheets

| File | MÃ´ táº£ |
|------|-------|
| `globals.css` | Global styles, TailwindCSS imports |

### ğŸ“ dist/ - Build Output

Production build artifacts (generated by `bun run build`):
- `index.html` - Entry HTML
- `assets/*.js` - Code-split JavaScript chunks
- `assets/*.css` - Compiled CSS
- `vortex-icon.svg` - Static assets

---

## ğŸ“ packages/backend/

**Tech Stack**: Bun 1.2, Hono 4.x, Prisma 6.0, PostgreSQL, Redis

### Root Configuration

```
backend/
â”œâ”€â”€ package.json              # Backend dependencies & scripts
â”œâ”€â”€ tsconfig.json             # TypeScript config (strict mode)
â””â”€â”€ prisma/
    â”œâ”€â”€ schema.prisma         # Database schema (8 models)
    â””â”€â”€ seed.ts               # Database seed script
```

### ğŸ“ src/ - Source Code

#### Entry Point

| File | MÃ´ táº£ |
|------|-------|
| `server.ts` | Bun server entry, Hono app setup, route mounting |

#### ğŸ“ api/ - API Route Handlers

**Authentication** (`api/auth/`)
- `auth.ts` - `/api/auth/*` routes
  - `POST /api/auth/message` - Get signing message
  - `POST /api/auth/login` - Login with signature
  - `POST /api/auth/verify` - Verify JWT token

**Token Scanner** (`api/scan/`)
- `scan.ts` - `/api/scan` routes
  - `POST /api/scan` - Scan token for security risks

**Portfolio** (`api/portfolio/`)
- `portfolio.ts` - `/api/portfolio/*` routes
  - `GET /api/portfolio/:address` - Get portfolio holdings
  - `GET /api/portfolio/:address/transactions` - Get transactions

**Watchlist** (`api/watchlist/`)
- `watchlist.ts` - `/api/watchlist/*` routes (protected)
  - `GET /api/watchlist` - Get user watchlist
  - `POST /api/watchlist` - Add token to watchlist
  - `DELETE /api/watchlist/:id` - Remove from watchlist

**Alerts** (`api/alerts/`)
- `alerts.ts` - `/api/alerts/*` routes (protected)
  - `GET /api/alerts` - Get user alerts
  - `POST /api/alerts` - Create alert
  - `PATCH /api/alerts/:id` - Update alert
  - `DELETE /api/alerts/:id` - Delete alert

**Health** (`api/health/`)
- `health.ts` - `/api/health/*` routes
  - `GET /api/health` - Full health check
  - `GET /api/health/ready` - Readiness probe
  - `GET /api/health/live` - Liveness probe

#### ğŸ“ lib/ - Core Libraries

**Authentication** (`lib/auth/`)
- `jwt.ts` - JWT generation & verification (HS256, jose)
- `signature.ts` - Web3 signature verification (viem)
- `nonce.ts` - Nonce management (Redis, one-time use)

**Scanner** (`lib/scanner/`)
- `goplusClient.ts` - GoPlus API client
- `tokenScanner.ts` - Token scanning orchestration

**Core Utilities** (`lib/`)
- `config.ts` - Environment configuration (Zod validation)
- `db.ts` - Prisma client singleton
- `cache.ts` - Redis cache client (Upstash)
- `logger.ts` - Structured logging utility
- `errors.ts` - Custom error classes

#### ğŸ“ middleware/ - HTTP Middleware

| File | MÃ´ táº£ |
|------|-------|
| `cors.ts` | CORS middleware (whitelist origins) |
| `auth.ts` | JWT authentication middleware |
| `rateLimit.ts` | Rate limiting (Redis-based) |
| `logger.ts` | Request logging middleware |
| `errorHandler.ts` | Global error handler |

### ğŸ“ tests/ - Test Suites

**Unit Tests** (`tests/unit/`)
- `jwt.test.ts` - JWT generation/verification
- `signature.test.ts` - Web3 signature verification
- `validators.test.ts` - Input validation
- `errors.test.ts` - Error classes
- `format.test.ts` - Formatting utilities
- `scanner.test.ts` - Token scanner logic

**Integration Tests** (`tests/integration/`)
- `auth.test.ts` - Authentication flow
- `scan.test.ts` - Token scanning API
- `portfolio.test.ts` - Portfolio endpoints
- `watchlist.test.ts` - Watchlist CRUD
- `alerts.test.ts` - Alert management
- `health.test.ts` - Health check endpoints

**Total**: 74 tests, 0 failures

---

## ğŸ“ docs/ - Documentation

| File | MÃ´ táº£ |
|------|-------|
| `ARCHITECTURE.md` | System architecture, data flow, components |
| `API.md` | Complete API reference with examples |
| `DEPLOYMENT.md` | Deployment guide (Vercel, database, env vars) |
| `TESTING.md` | Testing guide (unit, integration, E2E) |
| `PROJECT_STRUCTURE.md` | This file |

---

## ğŸ“ scripts/ - Utility Scripts

| File | MÃ´ táº£ |
|------|-------|
| `audit.ps1` | PowerShell audit script (code quality checks) |

---

## ğŸ“ .github/ - GitHub Templates

| File | MÃ´ táº£ |
|------|-------|
| `ISSUE_TEMPLATE/bug_report.md` | Bug report template |
| `ISSUE_TEMPLATE/feature_request.md` | Feature request template |
| `ISSUE_TEMPLATE/security_report.md` | Security report template |
| `PULL_REQUEST_TEMPLATE.md` | PR template |

---

## ğŸ“Š THá»NG KÃŠ Dá»° ÃN

### File Counts

| Category | Count |
|----------|-------|
| **Frontend Components** | 18 |
| **Backend API Routes** | 6 modules |
| **Middleware** | 5 |
| **Test Files** | 12 |
| **Pages** | 6 |
| **Hooks** | 4 |
| **Stores** | 4 |
| **Total Source Files** | ~100+ |

### Lines of Code (Approximate)

| Package | Lines |
|---------|-------|
| Frontend | ~8,000 |
| Backend | ~6,000 |
| Tests | ~2,000 |
| **Total** | **~16,000** |

---

## ğŸ”„ DATA FLOW

```
User Browser
    â†“
Frontend (React)
    â”œâ”€â”€ Zustand Stores (State)
    â”œâ”€â”€ React Hooks (Logic)
    â””â”€â”€ Components (UI)
    â†“
API Client (lib/api.ts)
    â†“
Backend API (Hono)
    â”œâ”€â”€ Middleware (CORS, Auth, Rate Limit)
    â”œâ”€â”€ Route Handlers
    â””â”€â”€ Core Libraries
    â†“
External Services
    â”œâ”€â”€ PostgreSQL (Prisma)
    â”œâ”€â”€ Redis (Upstash)
    â””â”€â”€ GoPlus API
```

---

## ğŸ—„ï¸ DATABASE SCHEMA (Prisma)

**8 Models**:
1. `User` - User accounts (wallet-based)
2. `Transaction` - On-chain transactions
3. `TransactionToken` - Tokens in transactions
4. `TokenCache` - Cached token security data
5. `UserPreference` - User settings
6. `UserAchievement` - User achievements
7. `Watchlist` - Saved tokens
8. `Alert` - Price/risk alerts

---

## ğŸ” SECURITY LAYERS

1. **Authentication**: JWT + Web3 signatures
2. **Rate Limiting**: Redis-based (per endpoint)
3. **CORS**: Strict whitelist (no wildcards)
4. **Input Validation**: Zod schemas on all endpoints
5. **SQL Injection**: Parameterized queries (Prisma)
6. **XSS**: No dangerouslySetInnerHTML
7. **Secrets**: Environment variables only

---

## ğŸ“¦ DEPENDENCIES CHÃNH

### Frontend
- `react` 19.x
- `vite` 6.0
- `typescript` 5.8
- `tailwindcss` 4.0
- `zustand` (state)
- `react-router` v7
- `viem` (EVM utilities)

### Backend
- `bun` 1.2 (runtime)
- `hono` 4.x (framework)
- `prisma` 6.0 (ORM)
- `@upstash/redis` (cache)
- `jose` (JWT)
- `viem` (EVM)
- `zod` (validation)

---

## ğŸš€ BUILD & DEPLOYMENT

### Build Commands

```bash
# Frontend
cd packages/frontend
bun run build          # Production build â†’ dist/

# Backend
cd packages/backend
bun run build          # TypeScript compile (optional)
```

### Deployment

- **Platform**: Vercel
- **Config**: `vercel.json`
- **Output**: `packages/frontend/dist`
- **Runtime**: Bun (serverless functions)

---

## ğŸ“ NOTES

- **Monorepo**: Single repository, multiple packages
- **TypeScript**: Strict mode enabled on both packages
- **Testing**: 74 tests, 100% pass rate
- **Code Quality**: 0 TypeScript errors, 0 console.logs (prod)
- **Security**: Production audit score 96/100

---

**Cáº­p nháº­t láº§n cuá»‘i**: January 2, 2026

